---

- name: Create a directory if it does not exist
  file:
    path: "{{ user.home }}/.config/aacs"
    state: directory
    owner: "{{ user.name }}"
    group: "{{ user.primary_group }}"
    mode: '0755'
  tags: ['bluray']

- block:

  - name: push bluray decoder thingy
    copy:
      src: config/aacs/KEYDB.cfg
      dest: "{{ user.home }}/.config/aacs/KEYDB.cfg"
    tags: ['bluray']

  - name: install these packages
    aur:
      use: yay
      name: "{{ media_pkgs }}"
      state: present
    tags: ['media_pkgs']

  become: True
  become_user: "{{ user.name }}"

# - name: push mpv image viewer script
#   copy:
#     src: usr/share/mpv/scripts/image.lua
#     dest: /usr/share/mpv/scripts/image.lua
#     directory_mode: no
#     owner: root
#     group: root
#     mode: '0644'
#     backup: yes
#   tags: ['mpv']
